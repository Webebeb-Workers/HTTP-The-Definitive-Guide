# HTTP 메시지

2장은 어떻게 HTTP 전송을 하느냐에 대한 것이라면, 이번 장은 HTTP 메세지의 모든 것임. 제대로 학습하자.

## HTTP 메시지 흐름

> [!NOTE]
> HTTP 메시지라 함은 클라이언트, 프락시, 서버 사이에서 주고받는 데이터 블록 <br />
> 메시지는 인바운드(원 서버로 향함)와 아웃바운드(클라이언트로 복귀함) 방향으로 흐름

<img width="499" alt="image" src="https://github.com/user-attachments/assets/91d3d343-193c-4f46-9e5f-1d630a5a59b6" />

또한, 모든 메시지는 다운스트림으로 흐르며, 발송자는 수신자의 업스트림.

<img width="499" alt="image" src="https://github.com/user-attachments/assets/e225df00-0061-4c8c-90a6-2c8572b8ae67" />

## 메시지의 각 부분

캐리지 리턴(ASCII 13)과 개행 문자(ASCII 10)로 구성 => CRLF로 종결해야함. 견고한 앱이면 그냥 개행 문자도 괜찮아야함.

### 3.2.1 메시지 문법

- **요청 메시지**와 **응답 메시지**로 분류
- 공통 구조
  - 시작줄(Start-line)
  - 헤더 블록
  - 본문(Body) - 선택

<img width="504" alt="image" src="https://github.com/user-attachments/assets/705519b7-5bd5-4191-b630-c3de17756c3a" />

#### 요청 메시지 형식

서버에게 리소스에 대해 무언가를 해달라고 부탁. 즉, 서버에 어떠한 동작이 일어나야하는지 작성해야함.

```
<메서드> <요청 URL> <버전>
<헤더>

<엔터티 본문>
```

#### 응답 메시지 형식

수행 결과에 대한 상태 정보와 결과 데이터를 클라이언트에게 돌려줌.

```
<버전> <상태코드> <사유구절>
<헤더>

<엔터티 본문>
```

### 메서드

> [!NOTE]
> 클라이언트가 서버에게 요청하는 동작을 정의 <br />
> 각 서버마다에 확장 메서드 가능

| 메서드      | 설명                          | 메시지 본문 여부 |
| ----------- | ----------------------------- | ---------------- |
| **GET**     | 문서 등 리소스 가져오기       | 없음             |
| **HEAD**    | 헤더만 가져오기               | 없음             |
| **POST**    | 서버에 처리 데이터 전송       | 있음             |
| **PUT**     | 서버에 데이터 저장            | 있음             |
| **TRACE**   | 프락스-서버 경로 추적         | 없음             |
| **OPTIONS** | 사용 가능 메서드, 리소스 확인 | 없음             |
| **DELETE**  | 리소스 삭제                   | 없음             |

### 상태 코드

> [!NOTE]
> 응답의 결과를 나타내는 세 자리 숫자 <br />
> 프로그램이 에러를 처리하기 용이할 수 있도록 설정

| 전체 범위 | 정의된 범위 | 분류            |
| --------- | ----------- | --------------- |
| 100-199   | 100-101     | 정보            |
| 200-299   | 200-206     | 성공            |
| 300-399   | 300-305     | 리다이렉션      |
| 400-499   | 400-415     | 클라이언트 에러 |
| 500-599   | 500-505     | 서버 에러       |

HTTP 통신을 사용할 때, 주로 사용하는 상태 코드는 아래와 같음.

- `200 OK`: 성공
- `401 Unauthorized`: 인증 필요
- `404 Not Found`: 리소스 없음

> [!TIP]
> HTTP 프로토콜은 확장성이 좋아 다른 상태코드를 커스텀해 추가할 수 있음 <br />
> 또한, 그 코드가 포함되는 상태 범위 내의 일반 구성원으로서 다뤄야함

### 사유 구절

> [!NOTE]
> 상태 코드에 대한 설명적 텍스트, 정해진 규칙따위 없음 <br />
> 사람에게 이해를 돕기 위해 사용, 프로그램 로직과는 무관

### 버전 번호

> [!NOTE]
> 통신하는 양쪽 애플리케이션의 프로토콜 버전이 어느 정도까지 인지 이해할 수 있는 버전 명시 <br /> > `HTTP/<메이저>.<마이너>` 형식

\+ 주의! HTTP/2.22는 HTTP/2.3보다 큼. 소수점이 아닌 22버전과 3버전이기 때문에.

### 헤더

> [!NOTE]
> Start-line 외 추가 정보 제공을 위한 블록, `키: 값` 쌍으로 정의 <br />
> 값이 클 경우 줄바꿈 가능, 그 앞에 스페이스 등 탭 문자가 와야함

#### 분류

- **일반 헤더** : 요청과 응답 양쪽
- **요청 헤더** : 요청에 대한 부가 정보
- **응답 헤더** : 응답에 대한 부가 정보
- **엔터티 헤더** : 본문 크기와 콘텐츠, 혹은 리소스 그 자체를 서술
- **확장 헤더** : 명세에 정의되지 않은 새로운 헤더, 커스텀

#### 예시

| 헤더 예시                                  | 설명                                              |
| ------------------------------------------ | ------------------------------------------------- |
| `Date: Tue, 3 Oct 1997 02:16:03 GMT`       | 서버 응답 시각                                    |
| `Content-length: 15040`                    | 15,040바이트 길이를 가진 엔터티 본문              |
| `Content-type: image/gif`                  | 엔터티 본문 타입은 GIF 이미지                     |
| `Accept: image/gif, image/jpeg, text/html` | 클라이언트에게 응답은 GIF, JPEG 이미지, HTML 가능 |

- `Content-Length`: 본문 크기
- `Content-Type`: 본문 타입
- `Accept`: 클라이언트 수용 타입

### 엔터티 본문(Body)

> [!NOTE]
> 메시지의 화물, 필요 데이터를 실을 수 있음 <br />
> 텍스트, 이진 데이터(이미지, 오디오, 앱 등) 포함 가능

### HTTP/0.9 메시지

<img width="507" alt="image" src="https://github.com/user-attachments/assets/fecb8ceb-fbfc-4f98-926f-dde11df9d3f8" />

- 초기 버전으로 단순함
- 요청: 메서드와 URL만 포함
- 응답: 엔터티 본문만 포함
- 현재는 제한적 사용

## HTTP 메서드

### 안전한 메서드

- 클라이언트가 HTTP 요청을 보낼 때 서버의 상태나 리소스를 변경하지 않는 메서드
- 예 : `GET`, `HEAD` 등

**안전성**은 HTTP 메서드의 정의에 의해 보장되지 않으며, 웹 애플리케이션 개발자가 서버의 동작을 어떻게 처리하느냐에 따라 달라잠.

### 종류

| 메서드      | 설명                                                                                                                                                                                                               | 안전성 유무 |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------- |
| **GET**     | 리소스를 요청하는 메서드                                                                                                                                                                                           | O           |
| **HEAD**    | `GET`처럼 동작하지만, 응답으로 헤더만 반환되는 메서드<br>- 리소스의 상태 확인<br>- 메타데이터 조회에 사용                                                                                                          | O           |
| **PUT**     | 요청 URL에 리소스가 존재하지 않으면 새로운 리소스를 생성<br>- 요청 URL에 이미 리소스가 존재하면 해당 리소스를 완전히 교체                                                                                          | X           |
| **POST**    | 서버에 데이터를 보내는 데 사용되는 메서드                                                                                                                                                                          | X           |
| **TRACE**   | 클라이언트가 서버에 보낸 요청 메시지가 중간에서 변경되었는지 확인하기 위해 서버가 받은 요청을 그대로 응답으로 되돌려주는 메서드<br/>- 주로 진단 용도<br>- 서버나 네트워크 인프라 설정에 따라 다르게 처리될 수 있음 | O           |
| **OPTIONS** | 서버가 지원하는 메서드 및 리소스에 대한 기타 옵션을 확인하는 데 사용되는 메서드                                                                                                                                    | O           |
| **DELETE**  | 요청 URL로 지정한 리소스를 삭제하는 데 사용되는 메서드                                                                                                                                                             | X           |

- 모든 서버가 모든 메서드 구현하지 않을 수 있음
- HTTP/1.1과 호환성을 유지하려면 최소한 `GET`과 `HEAD` 메서드 구현 필요
- 특정 메서드(`DELETE`, `PUT` 등)는 보안 설정에 따라 제한적으로 사용됨

#### **추가** : PUT과 POST의 차이

- PUT : 동일한 PUT 요청을 여러 번 보내더라도 결과 동일
- POST : 같은 POST 요청을 여러 번 보내면 결과 다름

### 확장 메서드 (Extension Methods)

HTTP는 필요에 따라 확장 메서드를 정의할 수 있도록 설계됨. 그래서 확장할 수 있음.

> [!NOTE]
> HTTP/1.1 명세에 정의되지 않은 메서드, 주로 특정 기능을 추가하기 위해 사용 <br />
> 웹 콘텐츠를 웹 서버로 발행 조력

#### 웹 배포 확장 메서드의 예 : [WebDAV 프로토콜](https://datatracker.ietf.org/doc/html/rfc4918)

| 메서드 | 설명                                         |
| ------ | -------------------------------------------- |
| LOCK   | 사용자의 리소스 잠금 기능 사용 가능          |
| MKCOL  | 사용자가 새로운 컬렉션(디렉토리)을 생성 가능 |
| COPY   | 서버에 있는 리소스 복사                      |
| MOVE   | 서버에 있는 리소스 이동                      |

\+ 주의 : "엄격하게 보내고 관대하게 받아들여라"는 원칙에 의거해 클라이언트는 정확한 요청을, 서버는 유연한 응답을 요구함.

## 상태 코드

[상태 코드](#상태-코드)에서 정의하고, 여기서는 각 분류별 상태 코드와 사유 구절을 요약하겠음.

### 100-199 ： 정보성 상태 코드 + 사유 구절

> [!NOTE]
> HTTP/1.1에서 도입된 비교적 새로운 상태 코드 <br />
> 요청 최적화를 위한 코드, 클라이언트 - 서버 간 상호작용 개선함

| 상태 코드 | 사유 구절           | 의미                                                                                         |
| --------- | ------------------- | -------------------------------------------------------------------------------------------- |
| **100**   | Continue            | 요청의 시작 부분 일부가 받아들여졌으며, 클라이언트는 나머지를 계속 이어서 보내야 함을 의미함 |
| **101**   | Switching Protocols | 클라이언트가 Upgrade 헤더에 나열한 프로토콜 중 하나로 서버가 프로토콜을 변경했음을 의미함    |

#### 추가사항

- 클라이언트 : 타임아웃 설정, 응답 없을 시 엔터티 전송 계속
- 서버 : `Expect: 100-continue` 헤더 시 적절히 응답, 미지원 클라이언트엔 미전송
- 프락시 : 다음 홉 서버 HTTP 버전 확인, `Expect` 헤더 관리, 클라이언트에 `100 Continue` 미전달

### 200-299： 성공 상태 코드 + 사유 구절

> [!NOTE]
> 요청 성공 시 보내는 상태 코드 <br />
> 서버는 상태 코드를 보내기 전에 반드시 필요한 작업을 완료해야 함

| 상태 코드 | 사유 구절                     | 의미                                                                                                                                                 |
| --------- | ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| **200**   | OK                            | 요청이 정상적으로 처리되었으며, 엔터티 본문에 요청된 리소스를 포함하고 있음.                                                                         |
| **201**   | Created                       | 서버가 요청(PUT, POST 등)에 따라 새로운 개체를 생성했음을 의미함. <br /> 응답은 생성된 리소스에 대한 참조(URL)가 포함된 Location 헤더를 포함해야 함. |
| **202**   | Accepted                      | 요청이 받아들여졌으나, 서버가 아직 그에 대한 어떤 동작도 수행하지 않았음을 의미함.                                                                   |
| **203**   | Non-Authoritative Information | 엔터티 헤더에 포함된 정보가 원래 서버가 아닌 리소스의 사본에서 왔음을 의미함.(선택 사항, 200 써도 무방)                                              |
| **204**   | No Content                    | 응답 메시지는 헤더와 상태줄을 포함하지만 엔터티 본문은 포함하지 않음. <br /> 주로 웹 브라우저의 갱신 요청에 사용됨.                                  |
| **205**   | Reset Content                 | 브라우저에게 현재 페이지의 HTML 폼에 채워진 모든 값을 비우라고 지시함.                                                                               |
| **206**   | Partial Content               | 클라이언트의 부분 혹은 범위 요청이 성공적으로 처리되었음을 의미함.                                                                                   |

### 300-399 ： 리다이렉션 상태 코드 + 사유 구절

<img width="529" alt="image" src="https://github.com/user-attachments/assets/154a2bac-f9f7-4fac-a752-15b9561d0f27" />

> [!NOTE]
> 클라이언트가 요청한 리소스에 대해 다른 위치, 내용 등 다른 대안 응답 제공

| 상태 코드 | 사유 구절          | 의미                                                                                                           |
| --------- | ------------------ | -------------------------------------------------------------------------------------------------------------- |
| **300**   | Multiple Choices   | 클라이언트가 동시에 여러 리소스를 가리키는 URL을 요청한 경우, 리소스의 목록과 함께 반환함.                     |
| **301**   | Moved Permanently  | 요청한 URL이 영구적으로 다른 위치로 이동했음을 의미함. 클라이언트는 이후의 요청에서 새로운 URL을 사용해야 함.  |
| **302**   | Found              | 요청한 리소스가 임시적으로 다른 위치에 있음을 의미함. 클라이언트는 이후의 요청에서 원래 URL을 사용해야 함.     |
| **303**   | See Other          | 클라이언트에게 리소스를 다른 URL에서 가져와야 함을 지시함. 주로 `POST` 요청에 대한 응답으로 사용됨.            |
| **304**   | Not Modified       | 클라이언트의 조건부 요청이 만족되어, 리소스가 수정되지 않았음을 의미함. 엔터티 본문을 포함하지 않음.           |
| **305**   | Use Proxy          | 리소스가 반드시 프락시를 통해서 접근되어야 함을 나타냄. 프락시의 위치는 `Location` 헤더를 통해 제공됨.         |
| **307**   | Temporary Redirect | `302`와 유사하지만, 클라이언트는 `Location` 헤더에 제공된 URL을 사용하여 동일한 메서드로 요청을 재전송해야 함. |

#### 추가사항

<img width="530" alt="image" src="https://github.com/user-attachments/assets/2161b0e3-babb-46a5-af14-168e9ec0d999" />

- 리다이렉트될 URL에 대한 링크와 설명을 포함시키는 것은 좋은 습관
- HTTP 버전에 따라 리다이렉션 상태 코드의 동작이 다를 수 있음. 예를 들어, HTTP/1.0과 HTTP/1.1 클라이언트는 동일한 `302` 상태 코드에 대해 다르게 동작함.
- 몇몇 상태 코드는 리소스에 대한 애플리케이션의 로컬 복사본이 원래 서버와 비교했을 때 유효한지 확인하기 위해 사용

### 400-499： 클라이언트 에러 상태 코드 + 사유 구절

> [!NOTE]
> 주로 클라이언트의 요청에 문제가 있을 때 사용됨
> 일부 상태 코드는 보안상 중요한 정보를 포함할 수 있으므로 신중하게 사용해야 함

| 상태 코드 | 사유 구절                       | 의미                                                                                                                |
| --------- | ------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| **400**   | Bad Request                     | 클라이언트가 잘못된 요청을 보냈음을 의미함.                                                                         |
| **401**   | Unauthorized                    | 리소스를 얻기 전에 클라이언트에게 인증을 요구함.                                                                    |
| **402**   | Payment Required                | 현재는 사용되지 않으나, 미래에 사용될 가능성을 위해 예약됨.                                                         |
| **403**   | Forbidden                       | 서버가 요청을 거부했음을 의미함. 필요 시 이유를 설명하는 엔터티 본문을 포함할 수 있음.                              |
| **404**   | Not Found                       | 요청한 URL을 서버가 찾을 수 없음을 의미함.                                                                          |
| **405**   | Method Not Allowed              | 요청한 URL에 대해 지원하지 않는 메서드로 요청받았음을 의미함. `Allow` 헤더에 사용 가능한 메서드 목록을 포함해야 함. |
| **406**   | Not Acceptable                  | 클라이언트가 요청한 리소스의 포맷이 서버가 제공할 수 있는 포맷과 일치하지 않음을 의미함.                            |
| **407**   | Proxy Authentication Required   | 프락시 서버에서 인증을 요구함.                                                                                      |
| **408**   | Request Timeout                 | 클라이언트의 요청을 완료하는 데 시간이 너무 오래 걸려 서버가 요청을 중단함.                                         |
| **409**   | Conflict                        | 요청이 리소스의 현재 상태와 충돌함을 의미함.                                                                        |
| **410**   | Gone                            | 요청한 리소스가 서버에서 영구적으로 제거되었음을 의미함.                                                            |
| **411**   | Length Required                 | 요청 메시지에 `Content-Length` 헤더가 없을 때 사용함.                                                               |
| **412**   | Precondition Failed             | 클라이언트의 조건부 요청이 실패했음을 의미함.                                                                       |
| **413**   | Request Entity Too Large        | 서버가 처리할 수 없는 크기의 요청 엔터티를 보냈을 때 사용함.                                                        |
| **414**   | Request URI Too Long            | 서버가 처리할 수 없는 길이의 요청 URI를 보냈을 때 사용함.                                                           |
| **415**   | Unsupported Media Type          | 서버가 지원하지 않는 미디어 타입의 엔터티를 클라이언트가 보냈을 때 사용함.                                          |
| **416**   | Requested Range Not Satisfiable | 요청한 범위가 리소스의 크기와 일치하지 않을 때 사용함.                                                              |
| **417**   | Expectation Failed              | 요청에 포함된 `Expect` 헤더의 기대가 서버에서 만족되지 않을 때 사용함.                                              |

### 500-599 ： 서버 에러 상태 코드 + 사유 구절

> [!NOTE]
> 클라이언트의 요청이 올바르더라도 서버 자체의 문제로 인해 요청을 처리할 수 없을 때 사용됨

| 상태 코드 | 사유 구절                  | 의미                                                                                                                |
| --------- | -------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| **500**   | Internal Server Error      | 서버가 요청을 처리하는 중에 예상치 못한 에러가 발생했음을 의미함.                                                   |
| **501**   | Not Implemented            | 서버가 요청한 기능을 지원하지 않음을 의미함. 예: 지원하지 않는 메서드 사용.                                         |
| **502**   | Bad Gateway                | 프락시나 게이트웨이가 상위 서버로부터 잘못된 응답을 받았음을 의미함.                                                |
| **503**   | Service Unavailable        | 서버가 현재 요청을 처리할 수 없으며, 나중에 다시 시도할 수 있음을 의미함. `Retry-After` 응답 헤더를 포함할 수 있음. |
| **504**   | Gateway Timeout            | 게이트웨이나 프락시가 상위 서버로부터 응답을 받지 못해 타임아웃이 발생했음을 의미함.                                |
| **505**   | HTTP Version Not Supported | 서버가 요청에 사용된 HTTP 버전을 지원하지 않음을 의미함.                                                            |

#### 추가사항

- `503 Service Unavailable` 상태 코드는 주로 서버가 일시적으로 과부하 상태이거나 유지보수 중일 때 사용됨

## 헤더

HTTP 헤더는 클라이언트-서버 통신의 메시지 목적과 내용을 정의, 표준/비표준 헤더의 목적을 설명함.

### 분류

1. **일반 헤더(General Headers)**
   - 클라이언트와 서버 양쪽 모두가 사용
   - `Connection`, `Date`, `MIME-Version` 등 기본 정보 전달
2. **요청 헤더(Request Headers)**
   - `Accept`, `Host`, `User-Agent` 등 클라이언트 요청 정보
   - 서버에게 알려줘야하는 정보
3. **응답 헤더(Response Headers)**
   - `Server`, `Set-Cookie` 등 서버 응답 상세 정보
   - 클라이언트에게 알려줘야하는 정보
4. **엔터티 헤더(Entity Headers)**
   - `Content-Length`, `Content-Type` 등 본문 관련 정보
5. **확장 헤더(Extension Headers)**
   - 표준화되지 않은 사용자 정의 헤더
   - 확장 헤더의 의미를 몰라도 용인/전달해야 함

### 일반 헤더 (General Headers)

> [!NOTE]
> 클라이언트와 서버 양쪽 모두가 사용, `Connection`, `Date`, `MIME-Version` 등 기본 정보 전달 <br />
> 메시지의 생성 일시, 연결 옵션 등 다양한 목적으로 사용

| 헤더                | 설명                                                                            |
| ------------------- | ------------------------------------------------------------------------------- |
| `Connection`        | 클라이언트와 서버 간의 연결에 대한 옵션을 설정함.                               |
| `Date`              | 메시지가 생성된 날짜와 시간을 제공함. 예: `Date: Tue, 3 Oct 1974 02:16:00 GMT`  |
| `MIME-Version`      | 발송자가 사용한 MIME의 버전을 알려줌.                                           |
| `Trailer`           | 청크 전송 인코딩으로 인코딩된 메시지의 끝 부분에 위치한 헤더들의 목록을 나열함. |
| `Transfer-Encoding` | 메시지에 적용된 인코딩 방식을 수신자에게 알려줌.                                |
| `Upgrade`           | 발송자가 업그레이드 하길 원하는 새 버전이나 프로토콜을 알려줌.                  |
| `Via`               | 메시지가 어떤 중개자(프락시, 게이트웨이)를 거쳐 왔는지 보여줌.                  |

#### 추가 사항

- `Trailer` 헤더는 청크 전송 코딩에 사용, 청크와 지속 커넥션에 대한 자세한 내용은 15장에서 다룸
- `Date` 헤더에서 사용할 수 있는 날짜 포맷은 부록 C를 참조
- **HTTP 캐시 헤더** : 매번 원 서버로부터 객체를 가져오는 대신 로컬 복사본으로 캐시할 수 있도록 해주는 최초의 헤더
  - `Cache-Control` : 캐시 지시자 전달
  - `Pragma` : 캐시 지시자의 대체 방법 (deprecated)

### 요청 헤더 (Request Headers)

> [!NOTE]
>
> `Accept`, `Host`, `User-Agent` 등 클라이언트 요청 정보, 즉, 서버에게 알려줘야하는 정보 <br />
> 클라이언트의 선호도, 능력, 인증 정보 등을 포함

| 헤더         | 설명                             |
| ------------ | -------------------------------- |
| `Client-IP`  | 클라이언트 IP 주소               |
| `From`       | 사용자 이메일                    |
| `Host`       | 대상 서버 정보 : 호스트, 포트 등 |
| `Referer`    | 현재 URI에서의 요청 문서 URL     |
| `User-Agent` | 요청된 애플리케이션 정보         |

#### UA(User Agent) 헤더들

| UA 헤더     | 정보            |
| ----------- | --------------- |
| `UA-Color`  | 디스플레이 색상 |
| `UA-CPU`    | CPU 정보        |
| `UA-Disp`   | 화면 성능       |
| `UA-OS`     | OS 정보         |
| `UA-Pixels` | 디스플레이 픽셀 |

#### 추가 사항

- `Client-IP`와 `UA-*` 헤더는 RFC 2616에 정의돼 있지 않지만 많은 HTTP 클라이언트 애플리케이션에서 구현돼 있음.
- `UA-*` 헤더는 보안에 영향을 줄 수 있으므로 신중하게 사용해야 함.

#### Accept 관련 헤더

클라이언트의 선호도와 능력을 서버에 전달. 서버는 이 헤더를 가지고 더 똑똑한 응답이 가능해짐.

| 헤더              | 설명                       |
| ----------------- | -------------------------- |
| `Accept`          | 허용 가능한 미디어 타입    |
| `Accept-Charset`  | 허용 가능한 문자집합       |
| `Accept-Encoding` | 허용 가능한 인코딩         |
| `Accept-Language` | 허용 가능한 언어           |
| `TE`              | 허용 가능한 확장 전송 코딩 |

#### 조건부 요청 헤더

요청에 대해 제약을 걸 수 있는 헤더.

| 헤더                  | 설명                                     |
| --------------------- | ---------------------------------------- |
| `Expect`              | 서버의 필요 행동 열거                    |
| `If-Match`            | 엔터티 태그 일치 시에만 문서 조회        |
| `If-Modified-Since`   | 지정 날짜 이후 변경되지 않은 경우만 요청 |
| `If-None-Match`       | 엔터티 태그 불일치 시에만 문서 조회      |
| `If-Range`            | 특정 범위 요청 가능                      |
| `If-Unmodified-Since` | 지정 날짜 이후 변경된 경우 요청 제한     |
| `Range`               | 특정 범위 리소스 요청                    |

#### 보안 헤더

HTTP의 요청을 위한 간단한 인증요구/응답 체계를 사용하기 위한 헤더임.

| 헤더            | 설명                              |
| --------------- | --------------------------------- |
| `Authorization` | 서버 인증 정보                    |
| `Cookie`        | 서버로 토큰 전달 (보안 영향 가능) |
| `Cookie2`       | 지원 쿠키 버전 정보               |

#### 프록시 헤더

| 헤더                  | 설명                                              |
| --------------------- | ------------------------------------------------- |
| `Max-Forwards`        | 프록시/게이트웨이 최대 전달 횟수 (TRACE 메서드용) |
| `Proxy-Authorization` | 프록시 인증용                                     |
| `Proxy-Connection`    | 프록시 연결 관리용                                |

\+ 자세한 내용은 6장 참조

### 응답 헤더 (Response Headers)

> [!NOTE]
> 서버가 클라이언트에게 응답을 보낼 때 추가적인 정보를 제공하는 헤더 <br />
> 서버의 정보, 응답의 상태, 리소스의 상태(`Server`, `Set-Cookie` 등) 포함

| 헤더          | 설명                           |
| ------------- | ------------------------------ |
| `Age`         | 응답의 경과 시간               |
| `Public`\*    | 리소스별 지원 요청 메서드 목록 |
| `Retry-After` | 리소스 사용 가능 예상 시간     |
| `Server`      | 서버 애플리케이션 정보         |
| `Title`\*     | HTML 문서 제목                 |
| `Warning`     | 상세 경고 메시지               |

\* `Public`은 RFC 2616/7231에서 제외됨, `Title`은 HTTP/1.0 초안에만 존재

#### 협상 헤더

HTTP/1.1은 서버와 클라이언트가 어떤 표현을 택할 것인가에 대해 지원함. 그를 위한 헤더.

| 헤더            | 설명                               |
| --------------- | ---------------------------------- |
| `Accept-Ranges` | 서버에서의 허용 가능한 리소스 범위 |
| `Vary`          | 응답 선택에 영향을 주는 헤더 목록  |

#### 응답 보안 헤더

| 헤더                 | 설명                                   |
| -------------------- | -------------------------------------- |
| `Proxy-Authenticate` | 프락시에서의 클라이언트 인증 요구 목록 |
| `WWW-Authenticate`   | 서버에서의 클라이언트 인증 요구 목록   |
| `Set-Cookie`         | 클라이언트 인증 토큰 설정              |
| `Set-Cookie2`        | 쿠키 설정(RFC 2965)                    |

### 엔터티 헤더 (Entity Headers)

> [!NOTE]
> 메시지의 엔터티 본문에 대한 정보를 제공하는 헤더
> 콘텐츠의 타입, 길이, 언어(`Content-Length`, `Content-Type` 등) 본문 관련 정보 포함

| 헤더       | 설명               |
| ---------- | ------------------ |
| `Allow`    | 허용된 요청 메서드 |
| `Location` | 리소스 실제 위치   |

#### 콘텐츠 헤더

| 헤더               | 설명                                    |
| ------------------ | --------------------------------------- |
| `Content-Base`\*   | 본문에 사용된, 상대 URL을 위한 기저 URL |
| `Content-Encoding` | 본문 인코딩 방식                        |
| `Content-Language` | 적절한 자연어                           |
| `Content-Length`   | 본문 크기                               |
| `Content-Location` | 실제 리소스 위치                        |
| `Content-MD5`      | 본문 MD5 체크섬                         |
| `Content-Range`    | 리소스 범위(바이트 단위)                |
| `Content-Type`     | 객체(MIME) 종류                         |

\* `Content-Base` 헤더는 RFC 2616에 정의되어 있지 않음.

#### 캐싱 헤더

| 헤더            | 설명             |
| --------------- | ---------------- |
| `ETag`\*        | 엔터티 태그      |
| `Expires`       | 엔터티 유효 기간 |
| `Last-Modified` | 최근 수정 일시   |

\* `ETag`는 기본적으로 리소스의 특정 버전에 대한 식별자
