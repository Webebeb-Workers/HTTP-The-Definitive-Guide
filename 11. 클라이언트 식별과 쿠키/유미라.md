# 1. 개별 접촉
HTTP는 익명이며 상태가 없는 요청-응답 방식의 통신 프로토콜이다. 하지만 웹 서버는 사용자를 식별하고 연속적인 요청을 추적하기 위해 일부 정보를 활용할 수 있다. 현대 웹사이트는 개인화된 서비스를 제공하기 위해 사용자 정보를 저장하고 활용한다.

1. **개별 인사** : 사용자에게 맞춤형 환영 메시지나 페이지 내용을 제공
2. **사용자 맞춤 추천** : 고객의 관심사를 학습해 선호할 만한 제품을 추천
3. **저장된 사용자 정보** : 주소나 결제 정보를 저장해 쇼핑을 편리하게 만듦
4. **세션 추적** : HTTP는 상태가 없지만, 장바구니 기능 등 사용자 상태를 유지하려면 각 요청을 식별하는 방법이 필요

# 2. HTTP 헤더
<img width="574" alt="image" src="https://github.com/user-attachments/assets/8cf8f888-76e9-46d6-b985-82eb4c287818" />

1. `From` 헤더 : 사용자의 이메일 주소를 포함하지만, 스팸 문제로 인해 대부분의 브라우저가 이를 전송하지 않는다.
2. `User-Agent` 헤더: 브라우저와 운영체제 정보를 제공하여 콘텐츠 최적화에 유용하지만, 개별 사용자 식별에는 한계가 있다.
3. `Referer` 헤더: 사용자가 이전에 방문한 페이지 정보를 포함하여 사용자의 관심사를 파악하는 데 도움을 줄 수 있다.

`From`, `User-Agent`, `Referer` 헤더는 사용자 식별과 관련된 정보를 포함하지만, 단독으로는 특정 사용자를 정확히 식별하기 어렵다.

# 3. 클라이언트 IP 주소
초기 웹에서는 클라이언트의 IP 주소를 사용자 식별에 활용하려 했지만, 여러 한계로 인해 효과적인 방법이 아니었다.

## IP 주소를 이용한 사용자 식별의 문제점
1. **컴퓨터 식별 한계** : IP 주소는 개별 사용자가 아닌 컴퓨터를 가리키므로, 여러 사용자가 같은 컴퓨터를 쓰면 식별이 불가능하다.
2. **동적 IP 할당** : ISP가 로그인 시마다 새로운 IP를 할당하면 사용자가 매번 다른 IP를 가지게 된다.
3. **NAT(Network Address Translation)** : 여러 사용자가 하나의 공용 IP를 공유하므로 개별 사용자 구분이 어렵다.
4. **프락시 및 게이트웨이** : 웹 서버가 실제 클라이언트가 아닌 프락시 서버의 IP를 보게 되며, 일부 프락시만 원본 IP를 전달하는 확장 헤더를 추가한다.

<img width="576" alt="image" src="https://github.com/user-attachments/assets/72ec13a3-9c66-42ac-985a-5a36aecb6712" />

# 4. 사용자 로그인
- 웹 서버는 사용자를 식별하기 위해 IP 주소 대신 사용자 이름과 비밀번호를 통한 로그인을 요구할 수 있다.
- HTTP는 WWW-Authenticate 및 Authorization 헤더를 사용하여 인증을 지원하며, 로그인 후 브라우저는 모든 요청에 로그인 정보를 자동으로 포함한다.

<img width="537" alt="image" src="https://github.com/user-attachments/assets/7b57fcd7-0923-48a3-8946-8f22d73d76b6" />

1. 브라우저가 www.joes-hardware.com 사이트에 요청을 보내면, 서버는 사용자의 식별 정보를 알지 못해 HTTP 401 Login Required 응답과 함께 WWW-Authenticate 헤더를 반환하여 로그인을 요구한다.
2. 브라우저는 로그인 대화상자를 띄우고, 사용자가 로그인 정보를 입력하면 브라우저는 해당 정보를 포함해 요청을 다시 보낸다.
3. 서버는 이제 사용자의 식별 정보를 알게 되고, 이후 브라우저는 요청할 때마다 Authorization 헤더에 사용자 정보를 자동으로 포함해 서버로 전송하여 세션 동안 사용자 식별을 유지한다.

## 문제점
- 로그인 과정은 번거롭고 불편하다. 
- 예를 들어, 프레드는 사이트마다 로그인해야 하고, 각 사이트에 대해 서로 다른 사용자 이름과 비밀번호를 기억해야 한다. 
- 또한, 사용자 이름이 이미 다른 사람에 의해 사용되거나 사이트마다 비밀번호 규칙이 달라서 불편하다.

# 5. 뚱뚱한 URL
일부 웹사이트는 URL에 사용자 식별 정보(예: 세션 ID)를 추가하여 사용자를 추적하는 방식을 사용했다. 이러한 URL을 **뚱뚱한 URL**이라고 하며, 사용자의 세션을 유지하는 데 활용된다.

## 작동 방식
1. 사용자가 웹사이트에 방문하면 고유한 세션 ID가 생성됨
2. 서버는 이 세션 ID를 URL에 포함한 후, 사용자에게 리다이렉트하여 적용된 URL을 제공
3. 이후 웹사이트의 모든 하이퍼링크는 이 세션 ID가 포함된 URL로 자동 변경됨
4. 사용자가 사이트 내에서 이동할 때 URL을 통해 세션 정보를 유지함

## 문제점
- **못생긴 URL** : 길고 복잡한 URL로 사용자 혼란
- **공유하지 못 하는 URL** : URL에 세션 정보가 포함되어 다른 사람에게 개인 정보가 노출될 위험
- **캐시를 사용할 수 없음** : URL 변경으로 인해 캐시 사용 불가
- **서버 부하 가중** : 매번 페이지를 다시 생성해야 함
- **이탈** : 사용자가 다른 사이트로 이동하거나 다른 URL을 요청하면 세션에서 이탈하게 되어, 세션 정보 초기화
- **세션 간 지속성의 부재** : URL을 북마크하지 않으면 로그아웃 시 모든 정보 손실