# 5. 웹 서버

웹 서버의 종류와 HTTP 통신 진단 방법 (perl), 웹 서버가 어떻게 HTTP 트랜잭션을 처리하는지 알아보는 챕터

## 5.1 다채로운 웹 서버

- **웹 서버**: 웹 서버 SW, 웹 페에지 제공에 특화된 장비
  - HTTP 요청 받아 콘텐츠를 클라이언트에게 돌려주는 역할

### 5.1.1 웹 서버 구현

- 웹 서버
  1. HTTP 프로토콜 구현
  2. 웹 리소스 관리
  3. 웹 서버 관리 기능 제공
- HTTP 프로토콜을 구현하고, 웹 리소스를 관리하고, 웹 서버 관리 기능을 제공하며 TCP 커넥션 관리에 대한 책임을 운영체제와 나눠 가짐

### 5.1.2 다목적 소프트웨어 웹 서버

- 모든 인터넷 웹 사이트의 37%가 마이크로소프트 웹 서버를 통해 서비스되고 있다
- 아파치 웹 서버가 점유율 35%로, 최근 근소한 차이로 점유율 2위로 밀려났다.
- nginx 서버를 사용하는 사이트가 최근 수년간 꾸준히 증가하여 약 14%를 점유하고 있음

### 5.1.3 임베디드 웹 서버

일반 소비자용 제품에 내장될 목적으로 만들어진 작은 웹 서버

## 5.2 간단한 펄 웹 서버

- HTTP/1.1의 기능을 지원하려면 풍부한 리소스 지원, 가상 호스팅, 접근 제어, 로깅, 설정, 모니터링, 그 외 성능을 위한 각종 기능이 필요함

- 그러나 최소한으로 기능하는 HTTP 서버라면 30줄 이하의 펄Perl 코드로 만들 수 있음 \*Perl(Practical Extraction and Reporting Language)

  - 텍스트 처리 및 시스템 관리 등 다양한 용도로 사용되는 고급 프로그래밍 언어

- type-o-serve
  - 클라이언트와 프락시 간의 상호작용 테스트에 유용한 펄 진단 툴

## 5.3 진짜 웹 서버가 하는 일

1. 커넥션을 맺는다 - 클라이언트의 접속을 받아들이거나, 원치 않는 클라이언트라면 닫는다.
2. 요청을 받는다 - HTTP 요청 메시지를 네트워크로부터 읽어 들인다.
3. 요청을 처리한다 - 요청 메시지를 해석하고 행동을 취한다.
4. 리소스에 접근한다 - 메시지에서 지정한 리소스에 접근한다.
5. 응답을 만든다 - 올바른 헤더를 포함한 HTTP 응답 메시지를 생성한다.
6. 응답을 보낸다 - 응답을 클라이언트에게 돌려준다.
7. 트랜잭션을 로그로 남긴다 - 로그파일에 트랜잭션 완료에 대한 기록을 남긴다.

<img width="595" alt="image" src="https://github.com/user-attachments/assets/6b62c99e-2f08-4032-9a8b-98ea840d4188" />
